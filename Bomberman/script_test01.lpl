
local utils = ImportScript("includes_test")
EndlessEvent = utils.EndlessEvent

function main()
	print "hello world testing"

	for c in Scenario->findObjectByUserCriteria(function(obj)
		return obj->getObjectType() == 0 and obj->isPlayerCreature()
	end) do
		c->setTag("Owner")
		print c->getTag()..": "..c->getObjectType()
	end

	local count = 0
	for obj in Scenario->findObjectByUserCriteria(function(obj) return true end) do
		print count..": "..obj->getTag()..", "..obj->getObjectType()
		count++
	end
	
	local oPC = Scenario->getObjectByTag("Owner",1)
	if oPC is null then
		print "Player Character not found"
		return
	end
	
	oPC->setLocalValue("counter_test",0)

	/*local delayedEvent;
	delayedEvent = function()
		print "Count: "..externalCount
		externalCount++
		Event.delayed(1.0,delayedEvent)
	end
	Event.delayed(1.0,delayedEvent)

	print Scripts*/

	Scripts.includes_test()

	EndlessEvent(1,function()
		local oPC = Scenario->getObjectByTag("Owner",1)
		local counter = oPC->getLocalValue("counter_test")
		print "Count: "..counter
		counter++
		oPC->setLocalValue("counter_test",counter)
	end)
	
	print typename GetObjectSelf()
end
